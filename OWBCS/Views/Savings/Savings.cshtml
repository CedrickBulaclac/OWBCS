@model OWBCS.Contribution
@{
    Layout = "/Views/Layout/LayoutAdmin.cshtml";
}

<!DOCTYPE html>

<html>
<head>
    <meta name="viewport" content="width=device-width" />
    <title>View</title>
    <link rel="stylesheet" href="~/Content/bootstrap3.3.7.css" />
    <link rel="stylesheet" href="~/Content/Datatable.css" />
    <link href="~/Content/themes/base/jquery-ui.min.css" rel="stylesheet" />
</head>
<body>
    <br />
    <br />
    <br />
    <br />
    @using (Html.BeginForm("Savings", "Savings", FormMethod.Post))
    {
        @Html.AntiForgeryToken()
        <div class="container">
            <div class="modal fade" id="AddSavings" role="dialog">
                <div class="modal-dialogs">
                    <div class="modal-content">
                        <div class="modal-header">
                            <button type="button" class="close" data-dismiss="modal">&times;</button>
                        </div>
                        <div class="modal-body">
                            <br />
                            <input type="hidden" name="MemberId" id="MemberId"/>
                            <div class="row">
                                @Html.LabelFor(model => model.ContributionAmt,"Contribution Amount:", htmlAttributes: new { @class = "control-label col-md-2" })
                                <div class="col-lg-12">
                                    @Html.EditorFor(model => model.ContributionAmt, new { htmlAttributes = new { @class = "form-control", @required = "required" } })
                                    @Html.ValidationMessageFor(model => model.ContributionAmt, "", new { @class = "text-danger" })
                                </div>
                            </div>
                        </div>
                        <div class="modal-footer">
                            <button type="submit" class="btn btn-success" id="btnAdd" name="btnAdd" onclick="Insert()">Add Savings</button>
                            <button type="button" class="btn btn-danger" id="btnClose" name="btnClose" data-dismiss="modal">Close</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    }
    <table class="table table-striped" id="memberData">
        <thead>
            <tr>
                <th>
                    Employee Id
                </th>
                <th>
                    First Name
                </th>
                <th>
                    Middle Name
                </th>
                <th>
                    Last Name
                </th>
                <th>
                    Birthdate
                </th>
                <th>
                    Actions
                </th>
            </tr>
        </thead>
    </table>

    <script src="~/Scripts/jquery-3.3.1.min.js"></script>
    <script src="~/Scripts/jquery.validate.min.js"></script>
    <script src="~/Scripts/jquery-ui-1.12.1.min.js"></script>
    <script src="~/Content/moment.js"></script>
    <script src="~/Content/Datatable.js"></script>
    <script>
        $(document).ready(function () {
            var table = $('#memberData').DataTable({
                "ajax": {
                    "url": '/Member/GetMember',
                    "type": "GET",
                    "datatype": "json",
                },
                "columns": [
                    { "data": "EmployeeId", "autowidth": true },
                    { "data": "Fname", "autowidth": true },
                    { "data": "Mname", "autowidth": true },
                    { "data": "Lname", "autowidth": true },
                    { "data": "Birthdate", render: function (data, type, announcement) { return announcement.FormattedDate }, "autowidth": true },
                    { "data": "Id", "autowidth": true, render: function (data) { return '<button class="btn btn-default" onclick="AddSavings(' + data + ')"><i class="glyphicon glyphicon-plus"></i></button>' } }
                ]
            });
        });
        function AddSavings(id) {
            $('#AddSavings').modal();
            document.getElementById('MemberId').value = id;
        }
    </script>
</body>

</html>

